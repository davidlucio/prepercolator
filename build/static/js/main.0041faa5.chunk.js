(this.webpackJsonpprepercolator=this.webpackJsonpprepercolator||[]).push([[0],{32:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),i=n(16),s=n.n(i),a=n(2),o=n(6),d=n(5),l=n(41),j="https://prepercolator-backend.herokuapp.com/api",u={getIngredients:function(){return l.get("".concat(j,"/ingredients/"))},getIngredientByTier:function(e){return l.get("".concat(j,"/ingredients/tier/").concat(e))},getDrinkTemplates:function(){return l.get("".concat(j,"/drinks/"))},getUserDrinks:function(e){return l.get("".concat(j,"/drinks/user"),{headers:{authorization:"Bearer ".concat(e)}})},getTypes:function(){return l.get("".concat(j,"/type/"))},addNewIngredient:function(e,t){return l.post("".concat(j,"/ingredients/"),e,{headers:{authorization:"Bearer ".concat(t)}})},addNewDrinkTemplate:function(e){return l.post("".concat(j,"/drinks/"),e)},deleteIngredientById:function(e,t){return l.delete("".concat(j,"/ingredients/").concat(e),{headers:{authorization:"Bearer ".concat(t)}})},getUserByToken:function(e){return l.get("".concat(j,"/users/user"),{headers:{authorization:"Bearer ".concat(e)}})},deleteUserByToken:function(e){return l.delete("".concat(j,"/users/delete"),{headers:{authorization:"Bearer ".concat(e)}})},getOrderbyUserToken:function(e){return l.get("".concat(j,"/orders/").concat(e),{headers:{authorization:"Bearer ".concat(e)}})},addOrder:function(e){return l.post("".concat(j,"/orders"),e)},login:function(e){return l.post("".concat(j,"/users/login"),e)},signUp:function(e){return l.post("".concat(j,"/users/"),e)}},b=c.a.createContext(),O=n(4),h=n(0);function g(e){e.updateTable;var t=Object(r.useState)(!1),n=Object(a.a)(t,2),c=n[0],i=n[1],s=Object(r.useState)([]),o=Object(a.a)(s,2),d=o[0],l=o[1],j=Object(r.useState)({ingredient_name:"",typeId:0,is_vegan:!1,price_per_unit:1,tier:"Base"}),b=Object(a.a)(j,2),g=b[0],p=b[1];Object(r.useEffect)((function(){u.getTypes().then((function(e){console.log(e.data),l(e.data)}))}),[]);var m=function(e){switch(e.target.name){case"newExisting":i(!c);break;case"ingredientName":if("ingredientName"===e.target.name){var t=Object(O.a)(Object(O.a)({},g),{},{ingredient_name:e.target.value});p(t)}break;case"ingredientType":if("ingredientType"===e.target.name){var n=Object(O.a)(Object(O.a)({},g),{},{typeId:e.target.value});p(n);break}break;case"pricePerUnit":var r=Object(O.a)(Object(O.a)({},g),{},{price_per_unit:e.target.value});p(r);break;case"tier":var s=Object(O.a)(Object(O.a)({},g),{},{tier:e.target.value});p(s)}};return Object(h.jsxs)("div",{className:"bpActions",children:[Object(h.jsx)("h3",{children:"Add a New Ingredient"}),Object(h.jsx)("div",{children:Object(h.jsxs)("form",{className:"bpForm",children:[Object(h.jsx)("label",{className:"newTypeLabel",children:Object(h.jsxs)("p",{children:["New Type?",Object(h.jsx)("input",{name:"newExisting",type:"checkbox",checked:c,onChange:m,value:c})]})}),!1===c?Object(h.jsx)("select",{name:"ingredientType",value:g.type_id,onChange:m,children:d.map((function(e){return Object(h.jsx)("option",{value:e.id,children:e.type_name},e.id)}))}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("input",{name:"newTypeName",type:"text",placeholder:"New Type Name",onChange:m}),Object(h.jsx)("input",{name:"newTypeUnit",type:"text",placeholder:"New Type Measurement Unit",onChange:m})]}),Object(h.jsx)("input",{name:"ingredientName",type:"text",placeholder:"Name of Ingredient?",onChange:m,value:g.ingredient_name}),Object(h.jsx)("label",{className:"newNameLabel",children:Object(h.jsxs)("p",{children:["Tier:",Object(h.jsxs)("select",{name:"tier",value:g.tier,onChange:m,children:[Object(h.jsx)("option",{value:"Base",children:"Base"}),Object(h.jsx)("option",{value:"Main",children:"Main"}),Object(h.jsx)("option",{value:"Flavor",children:"Flavor"}),Object(h.jsx)("option",{value:"Topping",children:"Topping"})]})]})}),Object(h.jsx)("label",{className:"newVeganLabel",children:Object(h.jsxs)("p",{children:["Vegan:",Object(h.jsx)("input",{className:"bpActionsCb",name:"isVegan",type:"checkbox",checked:g.is_vegan,onChange:m})]})}),Object(h.jsxs)("label",{className:"newPriceLabel",children:[Object(h.jsx)("p",{children:"Price per Unit:"}),Object(h.jsx)("input",{className:"bpActionsCb",name:"pricePerUnit",type:"number",value:g.price_per_unit,onChange:m,placeholder:0})]}),Object(h.jsx)("button",{name:"submitNewIngredient",type:"submit",onClick:function(e){var t=localStorage.getItem("token");e.preventDefault(),console.log(g),g.ingredient_name.length>0&&(console.log("New Ingredient to add: ".concat(g)),u.addNewIngredient(g,t).then((function(e){console.log("New Ingredient added: ".concat(e))}))),p({ingredient_name:"",typeId:0,is_vegan:!1,price_per_unit:1,tier:"Base"})},children:"Add Item"})]})})]})}function p(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)((function(){u.getIngredients().then((function(e){console.log(e.data),c(e.data)}))}),[]);var i=function(){u.getIngredients().then((function(e){console.log(e.data),c(e.data)}))},s=function(e){var t=e.target.value;console.log("Setting IngredientID:".concat(t," to sold out")),u.sellOutIngredientById(t).then((function(e){console.log("Successfully set IngredientID:".concat(t," to sold out. ").concat(e))})),c()},o=function(e){var t=e.target.value,n=localStorage.getItem("token");console.log("User double-clicked delete, move to delete item"),u.deleteIngredientById(t,n).then((function(e){console.log("Successfully deleted Ingredient. ".concat(e))})),i()};return Object(h.jsxs)("div",{className:"bpViewIngredients",children:[Object(h.jsxs)("div",{className:"bpAvailable",children:[Object(h.jsx)("h3",{children:"Available Ingredients:"}),Object(h.jsx)("ul",{children:n?n.map((function(e){return Object(h.jsxs)("li",{children:[Object(h.jsx)("span",{children:e.ingredient_name}),Object(h.jsx)("button",{value:e.id,onClick:s,children:"Sell Out"}),Object(h.jsx)("button",{value:e.id,onDoubleClick:o,children:"Delete"}),e.isSoldOut?Object(h.jsx)("p",{children:"Sold Out"}):null]},e.id)})):Object(h.jsx)("li",{children:"Loading..."})})]}),Object(h.jsx)(g,{className:"newIngredient",updateTable:i})]})}var m=n(9),x=n.n(m),f=n(14);function v(e){var t=e.drink,n=e.setCurrentDrink;return Object(h.jsxs)("div",{className:"bpDrinkTemplateCard",onClick:function(e){var r;(r=t.id)?n(r):console.log("Error changing drink menu at ".concat(r,"."))},children:[Object(h.jsx)("h5",{children:t.drink_name?t.drink_name:"Unnamed Drink"}),Object(h.jsxs)("p",{children:["A ",t.size," ounce ",t.is_steamed?"Hot ":"Iced "," drink."]}),Object(h.jsx)("h6",{children:"Ingredients:"}),Object(h.jsx)("ul",{children:t.ingredients?t.ingredients.length>0?t.ingredients.map((function(e){return Object(h.jsxs)("li",{children:[Object(h.jsx)("span",{children:e.ingredient_name}),Object(h.jsxs)("span",{children:[e.drinkIngredients.amount," ",e.type.type_units]})]},e.id)})):Object(h.jsx)("li",{children:"..."}):null})]},t.id)}function k(e){e.user;var t=Object(r.useState)([]),n=Object(a.a)(t,2),c=n[0],i=n[1];return Object(r.useEffect)((function(){function e(){return(e=Object(f.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("token"),u.getUserDrinks(t).then((function(e){i(e.data)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()})),Object(h.jsx)("div",{className:"bpViewDrinks",children:Object(h.jsxs)("div",{className:"bpDrinkTemplates",children:[Object(h.jsx)("h3",{children:"Current Drink Templates:"}),Object(h.jsx)("div",{className:"bpDrinkTemplateCardBox",children:c?c.map((function(e){return Object(h.jsx)(v,{drink:e},e.id)})):Object(h.jsx)("div",{children:"Loading..."})})]})})}function N(e){var t=e.user,n=Object(d.f)();return Object(h.jsxs)("header",{children:[Object(h.jsx)(o.b,{to:"/",className:"logo"}),Object(h.jsx)("nav",{children:Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:Object(h.jsx)(o.b,{to:"/",children:"Home"})}),Object(h.jsx)("li",{children:Object(h.jsx)(o.b,{to:"/user/profile",children:"Profile"})}),!0===t.is_admin?Object(h.jsx)("li",{children:Object(h.jsx)(o.b,{to:"/supersecretbusinessportal",children:"Business"})}):null,t?Object(h.jsx)("li",{children:Object(h.jsx)("button",{onClick:function(e){e.preventDefault(),localStorage.removeItem("token"),n.push("/"),window.location.reload()},children:"Logout"})}):null,t.newOrder?Object(h.jsx)("li",{children:Object(h.jsx)(o.b,{to:"/order",children:"Your Current Order"})}):null]})})]})}function w(){return Object(h.jsx)("footer",{className:"footer",children:Object(h.jsx)("p",{className:"copyright",children:"\xa9 Prepercolator, 2021"})})}function I(e){var t=e.user,n=Object(r.useState)("ingredients"),c=Object(a.a)(n,2),i=c[0],s=c[1],o=Object(d.f)();return Object(r.useEffect)((function(){!1===t.admin&&o.push("/")}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N,{user:t}),Object(h.jsx)("main",{children:Object(h.jsxs)("div",{className:"businessPortal",children:[Object(h.jsxs)("div",{className:"bpViewSelect",children:[Object(h.jsxs)("h1",{className:"bpWelcome",children:["Welcome, ",t.username]}),Object(h.jsx)("button",{onClick:function(){return s("ingredients")},children:"See Existing Ingredients"}),Object(h.jsx)("button",{onClick:function(){return s("drinks")},children:"See Existing Drinks"})]}),"ingredients"===i?Object(h.jsx)(p,{user:t}):Object(h.jsx)(k,{user:t})]})}),Object(h.jsx)(w,{})]})}function y(e){var t,n=Object(r.useState)(""),c=Object(a.a)(n,2),i=c[0],s=c[1],l=Object(r.useState)(""),j=Object(a.a)(l,2),b=j[0],O=j[1],g=Object(r.useState)(""),p=Object(a.a)(g,2),m=p[0],v=p[1],k=Object(d.f)();Object(r.useEffect)((function(){var t;(null===(t=e.user)||void 0===t?void 0:t.username)&&k.push("/")}),[null===(t=e.user)||void 0===t?void 0:t.username]);var N=function(e){switch(e.target.name){case"username":s(e.target.value);break;case"email":O(e.target.value);break;case"password":v(e.target.value)}},I=function(){var t=Object(f.a)(x.a.mark((function t(n){var r,c,a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r={username:i,email:b,password:m},t.next=4,u.login(r);case 4:if(c=t.sent,void 0===(a=c.data)){t.next=13;break}localStorage.setItem("token",a.token),console.log(a),e.setUser(a.user),k.push("/"),t.next=14;break;case 13:return t.abrupt("return",Object(h.jsx)("div",{children:"Incorrect Username, email or password"}));case 14:v(""),O(""),s("");case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("main",{className:"login-page",children:Object(h.jsxs)("div",{className:"login-window",children:[Object(h.jsx)("img",{className:"logo",src:"../assets/images/logo_bold_white.png"}),Object(h.jsx)("h1",{children:"Welcome to Prepercolator!"}),Object(h.jsx)("h3",{children:"Please Login"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{name:"username",type:"text",value:i,onChange:N,placeholder:"Username"}),Object(h.jsx)("input",{name:"password",type:"password",value:m,onChange:N,placeholder:"Password"})]}),Object(h.jsx)("button",{type:"submit",name:"login",onClick:I,children:"Login"}),Object(h.jsx)("h3",{children:"or"}),Object(h.jsx)("button",{type:"submit",children:Object(h.jsx)(o.b,{id:"createUserLink",to:"/createaccount",children:"Create Account"})})]})}),Object(h.jsx)(w,{})]})}function S(e){var t=e.user,n=Object(d.f)();Object(r.useEffect)((function(){t.username||n.push("/login")}));return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N,{user:t}),Object(h.jsx)("main",{className:"landing-page",children:Object(h.jsxs)("div",{className:"homePage",children:[Object(h.jsxs)("h1",{className:"hpWelcome",children:["Welcome back ",t.username,"!"]}),Object(h.jsx)("h2",{children:"What would you like to do?"}),Object(h.jsxs)("div",{className:"btnBox",children:[Object(h.jsx)("div",{className:"orderLink",children:Object(h.jsx)(o.b,{to:"/order",onClick:function(){t.newOrder=!0},children:"New Order"})}),Object(h.jsx)("div",{className:"drinkLink",children:Object(h.jsx)(o.b,{to:"/drink",children:"New Drink"})})]})]})}),Object(h.jsx)(w,{})]})}function D(e){var t=e.user;return Object(h.jsxs)("div",{className:"settings",children:[Object(h.jsx)("h3",{children:"Settings"}),Object(h.jsx)("div",{className:"userAvatar",children:Object(h.jsxs)("h4",{children:["Username: ",Object(h.jsx)("span",{className:"username",children:t.username})]})}),Object(h.jsxs)("ul",{className:"userOptions",children:[Object(h.jsx)("li",{children:"Update Email"}),Object(h.jsx)("li",{children:"Update Password"}),Object(h.jsx)("li",{children:"Report a problem"})]})]})}var C=n(8);function _(e){var t=e.usersDrinks,n=e.currentDrink,r=function(e){if(0!==e.length){var t=[];return e.map((function(e){for(var n=0;n<e.drinkIngredients.amount;n++)t.push(c(e.ingredient_name,e.tier,n+1))})),t}return Object(h.jsx)("p",{className:"error",children:"Selected drink has no ingredients listed."})},c=function(e,t,n){return e&&t&&n?Object(h.jsx)("div",{className:"ingredient ".concat(t),children:Object(h.jsx)("span",{children:e})},"cupcontent-".concat(e,"-").concat(n)):void 0};return Object(h.jsx)("section",{className:"cup-holder",children:function(e){if(e&&e>0){var n=Object(C.a)(t).find((function(t){return t.id==e}));return n&&[8,12,16].includes(n.size)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"my-cup cup-".concat(n.size,"oz"),children:r(n.ingredients)}),Object(h.jsx)("h3",{children:n.drink_name})]}):Object(h.jsx)("p",{className:"error",children:"Incompatible Drink"})}return Object(h.jsx)("p",{children:"Select a drink to learn more"})}(n)})}function E(e){var t=e.user,n=Object(d.f)(),c=Object(r.useState)([]),i=Object(a.a)(c,2),s=i[0],o=i[1],l=Object(r.useState)(0),j=Object(a.a)(l,2),b=j[0],O=j[1];return Object(r.useEffect)((function(){function e(){return(e=Object(f.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,u.getUserDrinks(t);case 3:n=e.sent,o(n.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.username||n.push("/login"),function(){e.apply(this,arguments)}()}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N,{user:t}),Object(h.jsx)("main",{children:Object(h.jsxs)("div",{className:"profile",children:[Object(h.jsxs)("h2",{children:[Object(h.jsx)("span",{className:"username",children:t.username}),"'s Profile"]}),Object(h.jsx)("h3",{children:"Saved Drinks"}),Object(h.jsxs)("div",{className:"display-drink-details",children:[Object(h.jsx)("div",{className:"card-wrapper",children:s?s.map((function(e){return Object(h.jsx)(v,{drink:e,currentDrink:b,setCurrentDrink:O},e.id)})):Object(h.jsx)(h.Fragment,{children:"Loading..."})}),Object(h.jsx)(_,{usersDrinks:s,currentDrink:b})]}),Object(h.jsx)(D,{user:t})]})}),Object(h.jsx)(w,{})]})}var U=n(69),T=n(70);function A(e){var t=e.cupSize,n=(e.setCupSize,e.drinkIngredients),c=e.setDrinkIngredients,i=e.drinkIngredientsAmnt,s=e.setDrinkIngredientsAmnt,o=Object(r.useState)([]),d=Object(a.a)(o,2),l=d[0],j=d[1];Object(r.useEffect)((function(){u.getIngredients().then((function(e){j(e.data)})).catch((function(e){console.log(e)}))}),[]);var b=function(e,t){var n=Object(C.a)(l).find((function(t){return t.id==e}));return Object(h.jsx)(U.a,{classNames:"pour-in",timeout:1e3,children:Object(h.jsx)("div",{className:"ingredient ".concat(n.tier),children:Object(h.jsx)("span",{onClick:function(t){return O(e)},children:n.ingredient_name})})},"cupcontent-".concat(e,"-").concat(t))},O=function(e){var t=Object(C.a)(n),r=Object(C.a)(i),a=t.indexOf(e),o=r[a],d=parseInt(o);d>1&&(r[a]=d-1,s(r)),1==d&&(t.splice(a,1),r.splice(a,1),c(t),s(r))};return Object(h.jsx)("section",{className:"cup-holder",children:Object(h.jsx)(T.a,{className:"my-cup cup-".concat(t,"oz"),children:function(){for(var e=[],t=0,r=Object.entries(n);t<r.length;t++)for(var c=Object(a.a)(r[t],2),s=c[0],o=c[1],d=i[s];d>0;d--)e.push(b(o,d));return e}()})})}function B(e){var t=e.drink,n=e.user;return Object(h.jsxs)("div",{className:"userDrinkCard",children:[Object(h.jsx)("div",{children:Object(h.jsx)("h3",{children:t.name})}),Object(h.jsx)(A,{drink:t}),Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{children:"Last"}),n.order?Object(h.jsx)("button",{children:"Add to your order"}):null,Object(h.jsx)("button",{children:"Next"})]})]})}function F(e){var t=e.user;return Object(h.jsxs)("main",{children:[Object(h.jsxs)("h2",{children:[t.username,"'s Saved Drinks"]}),Object(h.jsx)("div",{className:"drinkSlideshow",children:t.drinks?Object(h.jsxs)(h.Fragment,{children:[t.drinks.map((function(e){return Object(h.jsx)(B,{drink:e,user:t},e.id)}))," "]}):Object(h.jsx)(h.Fragment,{children:"Loading..."})}),Object(h.jsx)(o.b,{to:"/drink",children:"Create a new drink"})]})}n(35);function L(e){var t=e.drinkIngredients,n=e.setDrinkIngredients,c=e.drinkIngredientsAmnt,i=e.setDrinkIngredientsAmnt,s=Object(r.useState)([]),o=Object(a.a)(s,2),d=o[0],l=o[1],j=Object(r.useState)([]),b=Object(a.a)(j,2),O=b[0],g=b[1],p=Object(r.useState)([]),m=Object(a.a)(p,2),x=m[0],f=m[1],v=Object(r.useState)([]),k=Object(a.a)(v,2),N=k[0],w=k[1];Object(r.useEffect)((function(){u.getIngredientByTier("base").then((function(e){l(e.data)})).catch((function(e){console.log(e)})),u.getIngredientByTier("main").then((function(e){g(e.data)})).catch((function(e){console.log(e)})),u.getIngredientByTier("flavor").then((function(e){f(e.data)})).catch((function(e){console.log(e)})),u.getIngredientByTier("topping").then((function(e){w(e.data)})).catch((function(e){console.log(e)}))}),[]);var I=function(e){var r=Object(C.a)(t),s=Object(C.a)(c);r.includes(e)?(s[r.indexOf(e)]+=1,i(s)):(r.push(e),s[r.indexOf(e)]=1,i(s),n(r))};return Object(h.jsx)("section",{className:"ingredientList",children:Object(h.jsxs)("div",{className:"anti-scroll",children:[Object(h.jsxs)("ul",{className:"ingredients-bases",children:[Object(h.jsx)("label",{children:"base"}),d.map((function(e){return Object(h.jsx)("li",{className:e.icon?"ingredient-".concat(e.icon):"ingredient-liquid-0",id:e.id,onClick:function(e){return I(e.target.id)},children:e.ingredient_name},"ingredient-".concat(e.id))}))]}),Object(h.jsxs)("ul",{className:"ingredients-mains",children:[Object(h.jsx)("label",{children:"main"}),O.map((function(e){return Object(h.jsx)("li",{className:e.icon?"ingredient-".concat(e.icon):"ingredient-liquid-0",id:e.id,onClick:function(e){return I(e.target.id)},children:e.ingredient_name},"ingredient-".concat(e.id))}))]}),Object(h.jsxs)("ul",{className:"ingredients-flavors",children:[Object(h.jsx)("label",{children:"flavors"}),x.map((function(e){return Object(h.jsx)("li",{className:e.icon?"ingredient-".concat(e.icon):"ingredient-liquid-0",id:e.id,onClick:function(e){return I(e.target.id)},children:e.ingredient_name},"ingredient-".concat(e.id))}))]}),Object(h.jsxs)("ul",{className:"ingredients-toppings",children:[Object(h.jsx)("label",{children:"toppings"}),N.map((function(e){return Object(h.jsx)("li",{className:e.icon?"ingredient-".concat(e.icon):"ingredient-liquid-0",id:e.id,onClick:function(e){return I(e.target.id)},children:e.ingredient_name},"ingredient-".concat(e.id))}))]})]})})}function z(e){var t=e.user,n=Object(r.useState)(12),c=Object(a.a)(n,2),i=c[0],s=c[1],o=Object(r.useState)(""),l=Object(a.a)(o,2),j=l[0],b=l[1],g=Object(r.useState)([]),p=Object(a.a)(g,2),m=p[0],x=p[1],f=Object(r.useState)([]),v=Object(a.a)(f,2),k=(v[0],v[1]),I=Object(r.useState)([]),y=Object(a.a)(I,2),S=y[0],D=y[1],_=Object(r.useState)(0),E=Object(a.a)(_,2),U=E[0],T=E[1],B=Object(r.useState)(0),F=Object(a.a)(B,2),z=(F[0],F[1],Object(r.useState)([])),P=Object(a.a)(z,2),R=(P[0],P[1],Object(r.useState)(!0)),W=Object(a.a)(R,2),M=W[0],V=W[1],q=Object(r.useState)(!0),H=Object(a.a)(q,2),Y=H[0],J=H[1],K=Object(r.useState)([]),$=Object(a.a)(K,2),G=$[0],Q=$[1],X=Object(r.useState)({drink_name:"",ingredients:[],ingredient_amount:[],is_vegan:!1,is_steamed:!1,userId:t.id,size:12,price:0}),Z=Object(a.a)(X,2),ee=Z[0],te=Z[1];Object(d.f)();Object(r.useEffect)((function(){u.getIngredients().then((function(e){Q(e.data)}));var e=[];m.forEach((function(t){e.push(parseInt(t))})),k(e)}),[]);var ne=function(){var e={size:i,drink_name:j,ingredients:Object(C.a)(m),ingredient_amount:Object(C.a)(S),price:U,is_steamed:!1,userId:t.id};e.ingredients.forEach((function(t){if(!1===t.is_vegan)e.is_vegan=!1,te(Object(O.a)(Object(O.a)({},ee),{},{is_vegan:!1}));else{if(e.is_vegan=!0,0===e.drink_name.length)return void console.log("You forgot to name your drink!");te(Object(O.a)(Object(O.a)({},ee),{},{is_vegan:!0})),console.log("Drink Saved!")}}));var n=[],r=0;G.forEach((function(e){for(var t=0;t<m.length;t++){var r=m[t];e.id==r&&n.push(e.price_per_unit)}})),console.log(n),n.forEach((function(e){S.forEach((function(t){r+=e*t}))})),console.log(r),T(r),e.price=r,te(Object(O.a)(Object(O.a)({},ee),{},{price:r})),console.log(e),u.addNewDrinkTemplate(e).then((function(e){200===e.status?console.log("Drink added!"):console.log("something went wrong...")}))},re=function(e){var t=i;if("increase"==e){switch(i){case 8:t=12;break;case 12:case 16:t=16}return t>=16?V(!1):(V(!0),J(!0)),void s(t)}if("decrease"==e){switch(i){case 8:case 12:t=8;break;case 16:t=12}return t<=8?J(!1):(V(!0),J(!0)),void s(t)}};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N,{user:t}),Object(h.jsxs)("main",{className:"newdrink",children:[Object(h.jsx)("input",{name:"drinkName",type:"text",value:j,onChange:function(e){b(e.target.value),te(Object(O.a)(Object(O.a)({},ee),{},{drink_name:e.target.value}))},placeholder:"Drink Name"}),Object(h.jsx)(A,{cupSize:i,setCupSize:s,drinkIngredients:m,setDrinkIngredients:x,drinkIngredientsAmnt:S,setDrinkIngredientsAmnt:D}),Object(h.jsx)(L,{cupSize:i,setCupSize:s,drinkName:j,setDrinkName:b,drinkIngredients:m,setDrinkIngredients:x,addIngredient:function(e){u.getIngredients().then((function(t){t.data.forEach((function(t){t.id===e&&m.push(t)}))}))},removeIngredient:function(e){var t=m.findIndex((function(t){return t.id===e}));-1!==t&&m.splice(t,1)},saveDrink:ne,drinkIngredientsAmnt:S,setDrinkIngredientsAmnt:D,newDrink:ee,setNewDrink:te}),Object(h.jsxs)("div",{className:"btnHolder drink-mod-block",children:[Object(h.jsx)("button",{className:"drink-save",onClick:ne}),Object(h.jsx)("button",{className:"drink-size-increase",disabled:!M,onClick:function(e){return re("increase")}}),Object(h.jsx)("button",{className:"drink-size-decrease",disabled:!Y,onClick:function(e){return re("decrease")}})]})]}),Object(h.jsx)(w,{})]})}function P(e){var t=e.item,n=e.order,r=e.setOrder,c=e.index;return Object(h.jsxs)("li",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(h.jsx)("span",{children:null===t||void 0===t?void 0:t.drink_name}),Object(h.jsxs)("span",{children:["$",null===t||void 0===t?void 0:t.price.toFixed(2)]}),Object(h.jsx)("button",{value:c,onClick:function(e){var t=e.target.value,c=Object(C.a)(n);c.splice(t,1),r(c)},children:"x"})]})}function R(e){var t=e.user,n=e.order,c=e.setOrder,i=Object(r.useState)(1),s=Object(a.a)(i,2),o=s[0],d=s[1],l=Object(r.useState)(0),j=Object(a.a)(l,2),b=j[0],O=j[1],g=Object(r.useState)([{id:0,drink_name:"loading..."}]),p=Object(a.a)(g,2),m=p[0],v=p[1],k=function(e){e.preventDefault(),d(e.target.value)},N=function(){var e=Object(f.a)(x.a.mark((function e(t){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("ID OF ITEM TO ADD: ".concat(o)),r=Object(C.a)(n),console.log("OLD ORDER:"),console.log(r),m.forEach((function(e){e.id==o&&r.push(e)})),console.log("NEW DRINK ADDED FROM DRINKS"),c(r),window.alert("Drink Added!"),localStorage.setItem("currentOrder",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=0;function t(){return(t=Object(f.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,u.getUserDrinks(t);case 3:n=e.sent,v(n.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.forEach((function(t){e+=t.price})),e=e.toFixed(2),O(e),function(){t.apply(this,arguments)}()}),[n]),Object(h.jsxs)("div",{className:"orderCard",children:[Object(h.jsx)("h2",{children:"Your Order:"}),Object(h.jsxs)("ul",{children:[n?n.map((function(e,t,r){return Object(h.jsx)(P,{index:t,item:e,order:n,setOrder:c},t)})):Object(h.jsx)(h.Fragment,{children:"Loading..."}),Object(h.jsx)("hr",{}),Object(h.jsxs)("p",{children:["Total: $",b]})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{children:"Add a Drink to your order"}),Object(h.jsxs)("form",{name:"orderform",children:[Object(h.jsx)("select",{name:"savedDrinkSelect",value:o,onChange:k,onSubmit:k,children:m?m.map((function(e){return Object(h.jsx)("option",{value:e.id,children:e.drink_name},e.id)})):Object(h.jsx)(h.Fragment,{children:"Loading..."})}),Object(h.jsx)("button",{name:"addDrink",type:"submit",onClick:N,children:"Add"}),Object(h.jsx)("button",{name:"sendOrder",type:"submit",onClick:function(e){if(e.preventDefault(),"sendOrder"===e.target.name){var r={userId:t.id,total_price:b,drinks:n};if(console.log(r),0===r.drinks.length)return void window.alert("Looks like your order is empty..");u.addOrder(r).then((function(e){return 200!==e.status?Object(h.jsx)(h.Fragment,{children:"ERROR SENDING NEW ORDER"}):(window.alert("Your order has been submitted!"),void c([]))}))}},children:"Complete Order"})]})]})]})}function W(e){var t=e.user;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N,{user:t}),Object(h.jsxs)("main",{className:"userOrderHistory",children:[Object(h.jsx)("h2",{children:"Your Previous Orders:"}),t.orderHistory.map((function(e){return Object(h.jsx)(R,{order:e})}))]}),Object(h.jsx)(w,{})]})}function M(e){var t=e.user,n=Object(r.useState)([]),c=Object(a.a)(n,2),i=c[0],s=c[1];return Object(r.useEffect)((function(){})),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N,{user:t,order:i}),Object(h.jsx)("main",{children:Object(h.jsx)(R,{user:t,order:i,setOrder:s})}),Object(h.jsx)(w,{})]})}function V(e){var t,n=Object(r.useState)(""),c=Object(a.a)(n,2),i=c[0],s=c[1],l=Object(r.useState)(""),j=Object(a.a)(l,2),b=j[0],O=j[1],g=Object(r.useState)(""),p=Object(a.a)(g,2),m=p[0],v=p[1],k=Object(d.f)();Object(r.useEffect)((function(){var t;(null===(t=e.user)||void 0===t?void 0:t.username)&&k.push("/")}),[null===(t=e.user)||void 0===t?void 0:t.username]);var N=function(e){switch(e.target.name){case"username":s(e.target.value);break;case"email":O(e.target.value);break;case"password":v(e.target.value)}},I=function(){var t=Object(f.a)(x.a.mark((function t(n){var r,c,a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r={username:i,email:b,password:m},t.next=4,u.signUp(r);case 4:if(c=t.sent,void 0===(a=c.data)){t.next=13;break}localStorage.setItem("token",a.token),console.log(a),e.setUser(a.user),k.push("/"),t.next=14;break;case 13:return t.abrupt("return",Object(h.jsx)("div",{children:"Something went wrong"}));case 14:v(""),O(""),s("");case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("main",{className:"login-page",children:Object(h.jsxs)("div",{className:"login-window",children:[Object(h.jsx)("img",{className:"logo",src:"../assets/images/logo_bold_white.png"}),Object(h.jsx)("h1",{children:"Welcome to Prepercolator!"}),Object(h.jsx)("h3",{children:"Create Account"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{name:"username",type:"text",value:i,onChange:N,placeholder:"Username"}),Object(h.jsx)("input",{name:"email",type:"email",value:b,onChange:N,placeholder:"Email",required:!0,autocomplete:"on",autocompletetype:"email"}),Object(h.jsx)("input",{name:"password",type:"password",value:m,onChange:N,placeholder:"Password"})]}),Object(h.jsx)("button",{type:"submit",name:"login",onClick:I,children:"Create Account"}),Object(h.jsx)("h3",{children:"or"}),Object(h.jsx)("button",{type:"submit",children:Object(h.jsx)(o.b,{id:"createUserLink",to:"/login",children:"Login"})})]})}),Object(h.jsx)(w,{})]})}n(32);function q(){var e=Object(r.useState)({}),t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=localStorage.getItem("token");e&&u.getUserByToken(e).then((function(e){c(e.data)}))}),[]),Object(h.jsx)(b.Provider,{value:n,children:Object(h.jsx)(o.a,{children:Object(h.jsxs)(d.c,{children:[Object(h.jsx)(d.a,{exact:!0,path:"/",children:Object(h.jsx)(S,{user:n,setUser:c})}),Object(h.jsx)(d.a,{path:"/login",children:Object(h.jsx)(y,{user:n,setUser:c})}),Object(h.jsx)(d.a,{path:"/supersecretbusinessportal",children:Object(h.jsx)(I,{user:n,setUser:c})}),Object(h.jsx)(d.a,{path:"/drink",children:Object(h.jsx)(z,{user:n,setUser:c})}),Object(h.jsx)(d.a,{path:"/order",children:Object(h.jsx)(M,{user:n,setUser:c})}),Object(h.jsx)(d.a,{path:"/user/drinks",children:Object(h.jsx)(F,{user:n,setUser:c})}),Object(h.jsx)(d.a,{path:"/user/orders",children:Object(h.jsx)(W,{user:n,setUser:c})}),Object(h.jsx)(d.a,{path:"/user/profile",children:Object(h.jsx)(E,{user:n,setUser:c})}),Object(h.jsx)(d.a,{path:"/createaccount",children:Object(h.jsx)(V,{user:n,setUser:c})})]})})})}function H(){return Object(h.jsx)(q,{})}s.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(H,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.0041faa5.chunk.js.map